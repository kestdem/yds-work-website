<!DOCTYPE html>
<html lang="tr" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YDS Vocab ‚Äî ƒ∞ngilizce Kelime √ñƒürenme</title>
  <meta name="description" content="YDS sƒ±navƒ± i√ßin ƒ∞ngilizce kelime √∂ƒürenme uygulamasƒ±. G√ºnl√ºk 50 kelime, tekrar sistemi, quiz modu." />

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Word Data -->
  <script>window.ALL_DECKS = [];</script>
  <script src="data/deck-1.js"></script>
  <script src="data/deck-2.js"></script> 
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet" />

  <style>
    /* =========================================
       CSS CUSTOM PROPERTIES ‚Äî THEME SYSTEM
    ========================================= */
    :root {
      --ease: cubic-bezier(0.16, 1, 0.3, 1);
      --radius: 14px;
      --radius-sm: 8px;
      --radius-lg: 22px;
    }

    [data-theme="dark"] {
      --bg: #0d0f14;
      --bg-card: #161a23;
      --bg-surface: #1e2330;
      --bg-elevated: #252b3a;
      --border: rgba(255,255,255,0.08);
      --border-strong: rgba(255,255,255,0.15);
      --text: #e8eaf0;
      --text-muted: #7a819a;
      --text-soft: #a0a8c0;
      --accent: #6c8ef5;
      --accent-hover: #8aa3ff;
      --accent-dim: rgba(108,142,245,0.15);
      --success: #4ecb8a;
      --success-dim: rgba(78,203,138,0.15);
      --danger: #f55f6d;
      --danger-dim: rgba(245,95,109,0.15);
      --warning: #f5b84a;
      --warning-dim: rgba(245,184,74,0.15);
      --shadow: 0 4px 24px rgba(0,0,0,0.4);
      --shadow-lg: 0 12px 48px rgba(0,0,0,0.6);
      --glow: 0 0 40px rgba(108,142,245,0.2);
    }

    [data-theme="light"] {
      --bg: #f4f5f8;
      --bg-card: #ffffff;
      --bg-surface: #eef0f5;
      --bg-elevated: #e8eaf0;
      --border: rgba(0,0,0,0.08);
      --border-strong: rgba(0,0,0,0.15);
      --text: #1a1d2e;
      --text-muted: #8890a8;
      --text-soft: #5a6280;
      --accent: #4a6ef0;
      --accent-hover: #3558e8;
      --accent-dim: rgba(74,110,240,0.1);
      --success: #2db870;
      --success-dim: rgba(45,184,112,0.12);
      --danger: #e8425a;
      --danger-dim: rgba(232,66,90,0.1);
      --warning: #e8951a;
      --warning-dim: rgba(232,149,26,0.1);
      --shadow: 0 2px 16px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 32px rgba(0,0,0,0.12);
      --glow: 0 0 40px rgba(74,110,240,0.1);
    }

    /* =========================================
       RESET & BASE
    ========================================= */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Sora', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
      overflow-x: hidden;
    }

    /* =========================================
       TYPOGRAPHY
    ========================================= */
    h1, h2, h3 { font-weight: 700; letter-spacing: -0.02em; }
    h1 { font-size: clamp(1.8rem, 4vw, 2.8rem); }
    h2 { font-size: clamp(1.3rem, 3vw, 1.8rem); }
    h3 { font-size: 1.1rem; }

    .mono { font-family: 'Fira Code', monospace; }

    /* =========================================
       COMPONENTS ‚Äî BUTTONS
    ========================================= */
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 8px;
      padding: 12px 22px; border-radius: var(--radius-sm); border: none; cursor: pointer;
      font-family: 'Sora', sans-serif; font-size: 0.875rem; font-weight: 600;
      transition: all 0.2s var(--ease); text-decoration: none; white-space: nowrap;
    }
    .btn:active { transform: scale(0.97); }
    .btn-primary { background: var(--accent); color: #fff; }
    .btn-primary:hover { background: var(--accent-hover); box-shadow: 0 4px 16px rgba(108,142,245,0.4); }
    .btn-secondary { background: var(--bg-surface); color: var(--text); border: 1px solid var(--border-strong); }
    .btn-secondary:hover { background: var(--bg-elevated); }
    .btn-ghost { background: transparent; color: var(--text-soft); }
    .btn-ghost:hover { background: var(--bg-surface); color: var(--text); }
    .btn-success { background: var(--success); color: #fff; }
    .btn-danger { background: var(--danger); color: #fff; }
    .btn-lg { padding: 16px 32px; font-size: 1rem; border-radius: var(--radius); }
    .btn-sm { padding: 8px 14px; font-size: 0.8rem; }
    .btn-icon { padding: 10px; border-radius: 50%; }
    .btn:disabled { opacity: 0.45; cursor: not-allowed; transform: none !important; }

    /* =========================================
       COMPONENTS ‚Äî INPUTS
    ========================================= */
    .input-group { display: flex; flex-direction: column; gap: 6px; }
    .input-group label { font-size: 0.82rem; font-weight: 600; color: var(--text-soft); letter-spacing: 0.04em; text-transform: uppercase; }
    input[type="email"], input[type="password"], input[type="text"] {
      width: 100%; padding: 13px 16px; border-radius: var(--radius-sm);
      background: var(--bg-surface); border: 1px solid var(--border);
      color: var(--text); font-family: 'Sora', sans-serif; font-size: 0.95rem;
      transition: border-color 0.2s, box-shadow 0.2s; outline: none;
    }
    input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-dim); }

    /* =========================================
       LAYOUT
    ========================================= */
    #app { min-height: 100vh; }

    /* NAV */
    nav {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 24px; height: 64px;
      background: var(--bg); border-bottom: 1px solid var(--border);
      backdrop-filter: blur(12px);
    }
    .nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 1.1rem; }
    .nav-logo .logo-badge {
      width: 32px; height: 32px; background: var(--accent); border-radius: 8px;
      display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; color: #fff;
    }
    .nav-right { display: flex; align-items: center; gap: 12px; }

    /* PAGE CONTAINERS */
    .page { display: none; animation: fadeIn 0.35s var(--ease); }
    .page.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

    .container { max-width: 1100px; margin: 0 auto; padding: 24px 20px; }
    .container-sm { max-width: 520px; margin: 0 auto; padding: 24px 20px; }

    /* =========================================
       AUTH PAGE
    ========================================= */
    #auth-page {
      min-height: 100vh; display: flex; align-items: center; justify-content: center;
      padding: 20px; background: var(--bg);
    }
    .auth-card {
      width: 100%; max-width: 440px; background: var(--bg-card);
      border: 1px solid var(--border); border-radius: var(--radius-lg);
      padding: 40px 36px; box-shadow: var(--shadow-lg);
    }
    .auth-logo { text-align: center; margin-bottom: 28px; }
    .auth-logo .brand { font-size: 2rem; font-weight: 700; color: var(--accent); letter-spacing: -0.04em; }
    .auth-logo p { color: var(--text-muted); font-size: 0.9rem; margin-top: 6px; }
    .auth-tabs { display: flex; gap: 0; background: var(--bg-surface); border-radius: var(--radius-sm); padding: 4px; margin-bottom: 28px; }
    .auth-tab { flex: 1; text-align: center; padding: 9px; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 600; color: var(--text-muted); transition: all 0.2s; }
    .auth-tab.active { background: var(--bg-card); color: var(--text); box-shadow: var(--shadow); }
    .auth-form { display: flex; flex-direction: column; gap: 18px; }
    .auth-error { background: var(--danger-dim); color: var(--danger); padding: 11px 14px; border-radius: var(--radius-sm); font-size: 0.85rem; }

    /* =========================================
       DASHBOARD
    ========================================= */
    .stats-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 14px; margin-bottom: 28px; }
    .stat-card {
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
      padding: 20px 22px; transition: border-color 0.2s, transform 0.2s;
    }
    .stat-card:hover { border-color: var(--border-strong); transform: translateY(-2px); }
    .stat-card .stat-label { font-size: 0.78rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px; }
    .stat-card .stat-value { font-size: 2rem; font-weight: 700; color: var(--text); letter-spacing: -0.03em; }
    .stat-card .stat-sub { font-size: 0.8rem; color: var(--text-muted); margin-top: 4px; }

    .section-title { font-size: 0.82rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); margin-bottom: 14px; }

    .mode-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; margin-bottom: 32px; }
    .mode-card {
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius);
      padding: 24px; cursor: pointer; transition: all 0.25s var(--ease); text-decoration: none; color: var(--text);
      position: relative; overflow: hidden;
    }
    .mode-card::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
      background: linear-gradient(90deg, var(--accent), transparent); opacity: 0; transition: opacity 0.2s;
    }
    .mode-card:hover { border-color: var(--accent); transform: translateY(-3px); box-shadow: var(--glow); }
    .mode-card:hover::before { opacity: 1; }
    .mode-icon { font-size: 2rem; margin-bottom: 12px; }
    .mode-card h3 { margin-bottom: 6px; }
    .mode-card p { font-size: 0.85rem; color: var(--text-muted); line-height: 1.5; }

    /* Progress bar */
    .progress-bar { background: var(--bg-surface); border-radius: 100px; height: 6px; overflow: hidden; }
    .progress-fill { height: 100%; border-radius: 100px; background: var(--accent); transition: width 0.5s var(--ease); }

    /* =========================================
       FLASHCARD STUDY PAGE
    ========================================= */
    #study-page .container-sm { max-width: 680px; }

    .study-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
    .study-counter { font-size: 0.85rem; color: var(--text-muted); font-weight: 600; }
    .study-progress { flex: 1; margin: 0 20px; }

    /* FLIP CARD */
    .flip-scene { perspective: 1200px; margin: 0 auto 28px; cursor: pointer; max-width: 560px; }
    .flip-card { width: 100%; aspect-ratio: 3/2; position: relative; transform-style: preserve-3d; transition: transform 0.55s var(--ease); }
    .flip-card.flipped { transform: rotateY(180deg); }
    .flip-face {
      position: absolute; inset: 0; border-radius: var(--radius-lg);
      backface-visibility: hidden; display: flex; flex-direction: column;
      align-items: center; justify-content: center; padding: 32px;
      border: 1px solid var(--border); background: var(--bg-card); box-shadow: var(--shadow-lg);
      text-align: center;
    }
    .flip-back { transform: rotateY(180deg); background: var(--bg-card); }
    .flip-hint { font-size: 0.78rem; color: var(--text-muted); margin-bottom: 14px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.06em; }
    .flip-word { font-size: clamp(1.6rem, 4vw, 2.6rem); font-weight: 700; letter-spacing: -0.03em; color: var(--text); margin-bottom: 8px; }
    .flip-phonetic { font-size: 0.9rem; color: var(--text-muted); font-style: italic; }
    .flip-tr { font-size: 1.2rem; font-weight: 600; color: var(--accent); margin-bottom: 10px; }
    .flip-example { font-size: 0.85rem; color: var(--text-soft); line-height: 1.6; font-style: italic; margin-bottom: 12px; }
    .flip-tags { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; }
    .tag { font-size: 0.75rem; padding: 3px 10px; border-radius: 100px; font-weight: 500; }
    .tag-syn { background: var(--success-dim); color: var(--success); }
    .tag-ant { background: var(--danger-dim); color: var(--danger); }

    .card-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }

    /* =========================================
       QUIZ PAGE
    ========================================= */
    .quiz-card {
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg);
      padding: 32px; max-width: 600px; margin: 0 auto; box-shadow: var(--shadow);
    }
    .quiz-question { font-size: 1.4rem; font-weight: 700; margin-bottom: 8px; text-align: center; }
    .quiz-question-sub { font-size: 0.85rem; color: var(--text-muted); text-align: center; margin-bottom: 28px; }
    .quiz-options { display: flex; flex-direction: column; gap: 12px; }
    .quiz-option {
      padding: 15px 20px; border-radius: var(--radius-sm); border: 1.5px solid var(--border);
      background: var(--bg-surface); cursor: pointer; font-size: 0.95rem; font-weight: 500;
      transition: all 0.18s; text-align: left;
      color: var(--text);
    }
    .quiz-option:hover { border-color: var(--accent); background: var(--accent-dim); }
    .quiz-option.correct { border-color: var(--success); background: var(--success-dim); color: var(--success); }
    .quiz-option.wrong { border-color: var(--danger); background: var(--danger-dim); color: var(--danger); }
    .quiz-option:disabled { cursor: not-allowed; }

    /* =========================================
       WORD LIST PAGE
    ========================================= */
    .search-bar { position: relative; margin-bottom: 20px; }
    .search-bar input { padding-left: 42px; width: 100%; }
    .search-bar .search-icon { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 1rem; pointer-events: none; }

    .filter-row { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
    .filter-chip {
      padding: 6px 14px; border-radius: 100px; font-size: 0.8rem; font-weight: 600;
      border: 1.5px solid var(--border); background: transparent; color: var(--text-soft); cursor: pointer; transition: all 0.18s;
    }
    .filter-chip.active { background: var(--accent); border-color: var(--accent); color: #fff; }

    .word-grid { display: grid; gap: 10px; }
    .word-row {
      display: grid; grid-template-columns: 1fr 1fr 1fr auto; align-items: center; gap: 12px;
      background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
      padding: 14px 18px; transition: border-color 0.2s;
    }
    .word-row:hover { border-color: var(--border-strong); }
    .word-en { font-weight: 700; font-size: 0.95rem; }
    .word-tr { color: var(--text-soft); font-size: 0.88rem; }
    .word-example { font-size: 0.8rem; color: var(--text-muted); font-style: italic; display: none; }
    .mastery-badge { font-size: 0.75rem; padding: 3px 10px; border-radius: 100px; font-weight: 600; white-space: nowrap; }
    .mastery-0 { background: var(--bg-surface); color: var(--text-muted); }
    .mastery-1 { background: var(--warning-dim); color: var(--warning); }
    .mastery-2 { background: var(--success-dim); color: var(--success); }

    @media (max-width: 600px) {
      .word-row { grid-template-columns: 1fr 1fr auto; }
      .word-example { display: none !important; }
    }

    /* =========================================
       THEME TOGGLE
    ========================================= */
    .theme-toggle {
      width: 44px; height: 24px; background: var(--bg-surface); border: 1.5px solid var(--border-strong);
      border-radius: 100px; position: relative; cursor: pointer; transition: background 0.3s;
    }
    .theme-toggle::after {
      content: ''; position: absolute; width: 16px; height: 16px; border-radius: 50%;
      background: var(--accent); top: 2px; left: 2px; transition: transform 0.3s var(--ease);
    }
    [data-theme="light"] .theme-toggle::after { transform: translateX(20px); }

    /* =========================================
       TOAST NOTIFICATIONS
    ========================================= */
    #toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 999; display: flex; flex-direction: column; gap: 8px; }
    .toast {
      padding: 12px 18px; border-radius: var(--radius-sm); font-size: 0.875rem; font-weight: 500;
      box-shadow: var(--shadow-lg); animation: slideUp 0.3s var(--ease);
    }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .toast-success { background: var(--success); color: #fff; }
    .toast-error { background: var(--danger); color: #fff; }
    .toast-info { background: var(--accent); color: #fff; }

    /* =========================================
       LOADING SPINNER
    ========================================= */
    .spinner {
      width: 40px; height: 40px; border: 3px solid var(--border);
      border-top-color: var(--accent); border-radius: 50%; animation: spin 0.75s linear infinite; margin: 40px auto;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* =========================================
       EMPTY STATE
    ========================================= */
    .empty-state { text-align: center; padding: 60px 20px; color: var(--text-muted); }
    .empty-state .empty-icon { font-size: 3rem; margin-bottom: 14px; }
    .empty-state p { font-size: 0.95rem; max-width: 360px; margin: 0 auto; line-height: 1.6; }

    /* =========================================
       MISCELLANEOUS
    ========================================= */
    .hidden { display: none !important; }
    .text-accent { color: var(--accent); }
    .text-muted { color: var(--text-muted); }
    .text-success { color: var(--success); }
    .text-danger { color: var(--danger); }
    .mt-8 { margin-top: 8px; } .mt-16 { margin-top: 16px; } .mt-24 { margin-top: 24px; }
    .mb-8 { margin-bottom: 8px; } .mb-16 { margin-bottom: 16px; } .mb-24 { margin-bottom: 24px; }
    .flex { display: flex; } .flex-col { flex-direction: column; } .items-center { align-items: center; }
    .justify-between { justify-content: space-between; } .gap-8 { gap: 8px; } .gap-12 { gap: 12px; }
    .w-full { width: 100%; }

    /* Mobile nav */
    .bottom-nav {
      display: none; position: fixed; bottom: 0; left: 0; right: 0; z-index: 90;
      background: var(--bg-card); border-top: 1px solid var(--border);
      padding: 8px 0 max(8px, env(safe-area-inset-bottom));
    }
    .bottom-nav-inner { display: flex; justify-content: space-around; }
    .bottom-nav-item { display: flex; flex-direction: column; align-items: center; gap: 3px; font-size: 0.68rem; color: var(--text-muted); cursor: pointer; padding: 6px 12px; border-radius: var(--radius-sm); transition: color 0.2s; font-weight: 600; }
    .bottom-nav-item.active { color: var(--accent); }
    .bottom-nav-item .nav-icon { font-size: 1.3rem; }
    @media (max-width: 640px) {
      .bottom-nav { display: block; }
      nav .nav-links { display: none; }
      body { padding-bottom: 80px; }
    }

    .nav-links { display: flex; gap: 4px; }
    .nav-link { padding: 7px 14px; border-radius: var(--radius-sm); font-size: 0.85rem; font-weight: 600; color: var(--text-muted); cursor: pointer; transition: all 0.18s; }
    .nav-link:hover { color: var(--text); background: var(--bg-surface); }
    .nav-link.active { color: var(--accent); background: var(--accent-dim); }

    /* Study page specific */
    .session-badge { display: inline-flex; align-items: center; gap: 6px; font-size: 0.8rem; font-weight: 600; padding: 5px 12px; border-radius: 100px; background: var(--accent-dim); color: var(--accent); }
    .new-badge { background: var(--warning-dim); color: var(--warning); }
    .review-badge { background: var(--success-dim); color: var(--success); }

    /* result screen */
    .result-screen { text-align: center; padding: 40px 20px; }
    .result-screen .score-circle {
      width: 120px; height: 120px; border-radius: 50%; background: var(--accent-dim);
      border: 3px solid var(--accent); display: flex; align-items: center; justify-content: center;
      font-size: 2.2rem; font-weight: 700; color: var(--accent); margin: 0 auto 24px;
    }
  </style>
</head>
<body>

<!-- ============================================================
     AUTH PAGE
============================================================ -->
<div id="auth-page">
  <div class="auth-card">
    <div class="auth-logo">
      <div class="brand">YDS Vocab</div>
      <p>ƒ∞ngilizce kelime √∂ƒürenme sistemi</p>
    </div>
    <div class="auth-tabs">
      <div class="auth-tab active" data-tab="login">Giri≈ü Yap</div>
      <div class="auth-tab" data-tab="register">Kayƒ±t Ol</div>
    </div>
    <form class="auth-form" id="auth-form">
      <div class="input-group" id="name-group" style="display:none">
        <label>Ad Soyad</label>
        <input type="text" id="name-input" placeholder="Adƒ±nƒ±zƒ± girin" />
      </div>
      <div class="input-group">
        <label>E-posta</label>
        <input type="email" id="email-input" placeholder="ornek@email.com" required />
      </div>
      <div class="input-group">
        <label>≈ûifre</label>
        <input type="password" id="password-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6" />
      </div>
      <div id="auth-error" class="auth-error hidden"></div>
      <button type="submit" class="btn btn-primary btn-lg w-full" id="auth-btn">Giri≈ü Yap</button>
    </form>
  </div>
</div>

<!-- ============================================================
     MAIN APP (hidden until logged in)
============================================================ -->
<div id="app" style="display:none">

  <!-- NAV -->
  <nav>
    <div class="nav-logo">
      <div class="logo-badge">YDS</div>
      <span>Vocab</span>
    </div>
    <div class="nav-links" id="desktop-nav">
      <div class="nav-link active" data-page="dashboard">Ana Sayfa</div>
      <div class="nav-link" data-page="study">√áalƒ±≈ü</div>
      <div class="nav-link" data-page="quiz">Quiz</div>
      <div class="nav-link" data-page="words">Kelimeler</div>
    </div>
    <div class="nav-right">
      <div class="theme-toggle" id="theme-toggle" title="Tema deƒüi≈ütir"></div>
      <button class="btn btn-secondary btn-sm" id="logout-btn">√áƒ±kƒ±≈ü</button>
    </div>
  </nav>

  <!-- DASHBOARD PAGE -->
  <div class="page active" id="page-dashboard">
    <div class="container">
      <div class="flex items-center justify-between mb-24">
        <div>
          <h1>Merhaba, <span class="text-accent" id="user-name">√ñƒürenci</span> üëã</h1>
          <p class="text-muted mt-8" style="font-size:0.9rem;" id="today-date"></p>
        </div>
        <div id="streak-badge" class="session-badge">üî• <span id="streak-count">0</span> g√ºnl√ºk seri</div>
      </div>

      <!-- Stats -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">√ñƒürenilen</div>
          <div class="stat-value text-accent" id="stat-learned">0</div>
          <div class="stat-sub">toplam kelime</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Bug√ºn</div>
          <div class="stat-value" id="stat-today">0</div>
          <div class="stat-sub">/ 50 hedef</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Quiz Skoru</div>
          <div class="stat-value text-success" id="stat-quiz">‚Äî</div>
          <div class="stat-sub">son quiz</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Toplam Kelime</div>
          <div class="stat-value" id="stat-total">0</div>
          <div class="stat-sub">k√ºt√ºphanede</div>
        </div>
      </div>

      <!-- Daily progress -->
      <div class="bg-card mb-24" style="background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:20px 24px;">
        <div class="flex justify-between items-center mb-8">
          <div class="section-title" style="margin:0">G√ºnl√ºk ƒ∞lerleme</div>
          <span class="text-muted" style="font-size:0.85rem;"><span id="progress-num">0</span>/50</span>
        </div>
        <div class="progress-bar mt-8">
          <div class="progress-fill" id="daily-progress-fill" style="width:0%"></div>
        </div>
      </div>

      <!-- Modes -->
      <div class="section-title">√áalƒ±≈üma Modu</div>
      <div class="mode-grid">
        <div class="mode-card" data-page="study">
          <div class="mode-icon">üÉè</div>
          <h3>Kelime Kartlarƒ±</h3>
          <p>√áevir-bak y√∂ntemiyle kelime ezber et. Bug√ºn√ºn 50 yeni kelimesini √∂ƒüren.</p>
        </div>
        <div class="mode-card" data-page="quiz">
          <div class="mode-icon">üéØ</div>
          <h3>Quiz</h3>
          <p>√ñƒürendiƒüin kelimeleri 4 se√ßenekli sorularla peki≈ütir.</p>
        </div>
        <div class="mode-card" data-page="review">
          <div class="mode-icon">üîÅ</div>
          <h3>Tekrar</h3>
          <p>√ñnceki g√ºnlerin kelimelerini hafƒ±za g√º√ßlendirme tekniƒüiyle g√∂zden ge√ßir.</p>
        </div>
        <div class="mode-card" data-page="words">
          <div class="mode-icon">üìö</div>
          <h3>Kelime Listesi</h3>
          <p>T√ºm kelimelere g√∂z at, filtrele, ara.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- STUDY PAGE -->
  <div class="page" id="page-study">
    <div class="container-sm">
      <div class="study-header">
        <button class="btn btn-ghost btn-sm" data-page="dashboard">‚Üê Geri</button>
        <div style="text-align:center">
          <span id="study-session-badge" class="session-badge new-badge">Yeni Kelimeler</span>
        </div>
        <span class="study-counter mono" id="study-counter">0/0</span>
      </div>

      <div class="study-progress mb-16">
        <div class="progress-bar">
          <div class="progress-fill" id="study-progress-fill" style="width:0%"></div>
        </div>
      </div>

      <!-- Flip Card -->
      <div class="flip-scene" id="flip-scene" onclick="flipCard()">
        <div class="flip-card" id="flip-card">
          <!-- FRONT -->
          <div class="flip-face flip-front">
            <div class="flip-hint">ƒ∞ngilizce ‚Üí Kartƒ± √ßevir</div>
            <div class="flip-word" id="card-en">abandon</div>
            <div class="flip-phonetic" id="card-level"></div>
          </div>
          <!-- BACK -->
          <div class="flip-face flip-back">
            <div class="flip-hint">T√ºrk√ße Anlam</div>
            <div class="flip-tr" id="card-tr"></div>
            <div class="flip-example" id="card-example"></div>
            <div class="flip-tags" id="card-tags"></div>
          </div>
        </div>
      </div>

      <div class="card-actions" id="card-actions-initial">
        <button class="btn btn-secondary btn-lg" onclick="flipCard()">üîÑ √áevir</button>
        <button class="btn btn-ghost" onclick="skipCard()">Atla ‚Üí</button>
      </div>

      <div class="card-actions hidden" id="card-actions-rated">
        <button class="btn btn-danger" onclick="rateCard('hard')">üòÖ Zor</button>
        <button class="btn btn-secondary" onclick="rateCard('medium')">ü§î Orta</button>
        <button class="btn btn-success" onclick="rateCard('easy')">‚úÖ Bildim</button>
      </div>

      <div id="study-complete" class="result-screen hidden">
        <div class="score-circle" id="study-score-circle">üéâ</div>
        <h2 class="mb-8">Harika i≈ü!</h2>
        <p class="text-muted mb-24">Bug√ºn√ºn kartlarƒ±nƒ± tamamladƒ±n.</p>
        <div class="flex gap-12 justify-center flex-wrap">
          <button class="btn btn-primary" data-page="quiz">Quiz'e ge√ß ‚Üí</button>
          <button class="btn btn-secondary" data-page="dashboard">Ana sayfa</button>
        </div>
      </div>
    </div>
  </div>

  <!-- QUIZ PAGE -->
  <div class="page" id="page-quiz">
    <div class="container-sm">
      <div class="study-header">
        <button class="btn btn-ghost btn-sm" data-page="dashboard">‚Üê Geri</button>
        <h2 style="font-size:1.1rem">Quiz Modu</h2>
        <span class="study-counter mono" id="quiz-counter">0/0</span>
      </div>

      <div class="study-progress mb-24">
        <div class="progress-bar"><div class="progress-fill" id="quiz-progress-fill" style="width:0%"></div></div>
      </div>

      <div class="quiz-card" id="quiz-card">
        <div class="quiz-question" id="quiz-word">‚Äî</div>
        <div class="quiz-question-sub">Doƒüru T√ºrk√ße anlamƒ± se√ßin</div>
        <div class="quiz-options" id="quiz-options"></div>
      </div>

      <div id="quiz-complete" class="result-screen hidden">
        <div class="score-circle" id="quiz-score-circle">0%</div>
        <h2 class="mb-8">Quiz Tamamlandƒ±!</h2>
        <p class="text-muted mb-24" id="quiz-result-text"></p>
        <div class="flex gap-12 justify-center flex-wrap">
          <button class="btn btn-primary" onclick="startQuiz()">Tekrar Dene</button>
          <button class="btn btn-secondary" data-page="dashboard">Ana sayfa</button>
        </div>
      </div>
    </div>
  </div>

  <!-- REVIEW PAGE -->
  <div class="page" id="page-review">
    <div class="container-sm">
      <div class="study-header">
        <button class="btn btn-ghost btn-sm" data-page="dashboard">‚Üê Geri</button>
        <h2 style="font-size:1.1rem">Tekrar Modu</h2>
        <span class="study-counter mono" id="review-counter">0/0</span>
      </div>
      <div class="study-progress mb-16">
        <div class="progress-bar"><div class="progress-fill" id="review-progress-fill" style="width:0%"></div></div>
      </div>
      <div id="review-content">
        <div class="empty-state">
          <div class="empty-icon">‚è≥</div>
          <p>Tekrar edilecek kelime y√ºkleniyor...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- WORDS PAGE -->
  <div class="page" id="page-words">
    <div class="container">
      <h2 class="mb-16">Kelime K√ºt√ºphanesi</h2>
      <div class="search-bar">
        <span class="search-icon">üîç</span>
        <input type="text" id="search-input" placeholder="Kelime ara..." />
      </div>
      <div class="filter-row">
        <div class="filter-chip active" data-filter="all">T√ºm√º</div>
        <div class="filter-chip" data-filter="new">Yeni</div>
        <div class="filter-chip" data-filter="learning">√ñƒüreniliyor</div>
        <div class="filter-chip" data-filter="mastered">√ñƒürenildi</div>
      </div>
      <div class="word-grid" id="words-grid">
        <div class="spinner"></div>
      </div>
    </div>
  </div>

</div><!-- end #app -->

<!-- BOTTOM NAV (mobile) -->
<div class="bottom-nav" id="bottom-nav" style="display:none">
  <div class="bottom-nav-inner">
    <div class="bottom-nav-item active" data-page="dashboard"><span class="nav-icon">üè†</span>Ana Sayfa</div>
    <div class="bottom-nav-item" data-page="study"><span class="nav-icon">üÉè</span>√áalƒ±≈ü</div>
    <div class="bottom-nav-item" data-page="quiz"><span class="nav-icon">üéØ</span>Quiz</div>
    <div class="bottom-nav-item" data-page="words"><span class="nav-icon">üìö</span>Kelimeler</div>
  </div>
</div>

<!-- TOAST -->
<div id="toast-container"></div>

<!-- ============================================================
     FIREBASE CONFIG
============================================================ -->
<script src="firebase-config.js"></script>

<!-- ============================================================
     APPLICATION JAVASCRIPT
============================================================ -->
<script>
// ============================================================
// STATE
// ============================================================
const State = {
  user: null,
  userDoc: null,
  words: [],
  progress: {},      // { wordId: { mastery: 0/1/2, lastSeen: ts, seenCount: int } }
  studyQueue: [],
  studyIndex: 0,
  cardFlipped: false,
  quizQueue: [],
  quizIndex: 0,
  quizScore: 0,
  todayKey: new Date().toISOString().slice(0,10),
};

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  State.words = window.ALL_DECKS || [];

  setupTheme();
  setupAuthTabs();
  setupNavigation();
  setupSearch();
  setupFilters();

  document.getElementById('today-date').textContent =
    new Date().toLocaleDateString('tr-TR', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
  document.getElementById('stat-total').textContent = State.words.length;

  auth.onAuthStateChanged(user => {
    if (user) {
      loginSuccess(user);
    } else {
      showAuthPage();
    }
  });
});

// ============================================================
// THEME
// ============================================================
function setupTheme() {
  const saved = localStorage.getItem('yds-theme') || 'dark';
  document.documentElement.setAttribute('data-theme', saved);
  document.getElementById('theme-toggle').addEventListener('click', () => {
    const cur = document.documentElement.getAttribute('data-theme');
    const next = cur === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('yds-theme', next);
  });
}

// ============================================================
// AUTH
// ============================================================
function setupAuthTabs() {
  let mode = 'login';
  document.querySelectorAll('.auth-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      mode = tab.dataset.tab;
      document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById('auth-btn').textContent = mode === 'login' ? 'Giri≈ü Yap' : 'Kayƒ±t Ol';
      document.getElementById('name-group').style.display = mode === 'register' ? 'flex' : 'none';
      document.getElementById('auth-error').classList.add('hidden');
    });
  });

  document.getElementById('auth-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('email-input').value.trim();
    const password = document.getElementById('password-input').value;
    const btn = document.getElementById('auth-btn');
    const errEl = document.getElementById('auth-error');

    btn.disabled = true;
    btn.textContent = '...';
    errEl.classList.add('hidden');

    const currentMode = document.querySelector('.auth-tab.active').dataset.tab;
    try {
      if (currentMode === 'login') {
        await auth.signInWithEmailAndPassword(email, password);
      } else {
        const name = document.getElementById('name-input').value.trim() || '√ñƒürenci';
        const cred = await auth.createUserWithEmailAndPassword(email, password);
        await cred.user.updateProfile({ displayName: name });
        await db.collection('users').doc(cred.user.uid).set({
          name, email, createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          progress: {}, streak: 0, lastStudyDate: null
        });
      }
    } catch(err) {
      errEl.textContent = friendlyError(err.code);
      errEl.classList.remove('hidden');
      btn.disabled = false;
      btn.textContent = currentMode === 'login' ? 'Giri≈ü Yap' : 'Kayƒ±t Ol';
    }
  });

  document.getElementById('logout-btn').addEventListener('click', () => auth.signOut());
}

function friendlyError(code) {
  const msgs = {
    'auth/user-not-found': 'Bu e-posta ile kayƒ±tlƒ± kullanƒ±cƒ± bulunamadƒ±.',
    'auth/wrong-password': '≈ûifre yanlƒ±≈ü.',
    'auth/email-already-in-use': 'Bu e-posta zaten kayƒ±tlƒ±.',
    'auth/invalid-email': 'Ge√ßersiz e-posta adresi.',
    'auth/weak-password': '≈ûifre en az 6 karakter olmalƒ±.',
    'auth/too-many-requests': '√áok fazla deneme. L√ºtfen biraz bekleyin.',
  };
  return msgs[code] || 'Bir hata olu≈ütu. L√ºtfen tekrar deneyin.';
}

async function loginSuccess(user) {
  State.user = user;
  document.getElementById('user-name').textContent = user.displayName || user.email.split('@')[0];
  await loadUserData();
  showApp();
}

function showAuthPage() {
  document.getElementById('auth-page').style.display = 'flex';
  document.getElementById('app').style.display = 'none';
  document.getElementById('bottom-nav').style.display = 'none';
}

function showApp() {
  document.getElementById('auth-page').style.display = 'none';
  document.getElementById('app').style.display = 'block';
  document.getElementById('bottom-nav').style.display = 'block';
  updateDashboard();
}

// ============================================================
// FIRESTORE ‚Äî USER DATA
// ============================================================
async function loadUserData() {
  try {
    const snap = await db.collection('users').doc(State.user.uid).get();
    if (snap.exists) {
      State.userDoc = snap.data();
      State.progress = State.userDoc.progress || {};
      updateStreak();
    } else {
      // create doc for google sign-in etc.
      await db.collection('users').doc(State.user.uid).set({
        name: State.user.displayName || '√ñƒürenci',
        email: State.user.email,
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        progress: {}, streak: 0, lastStudyDate: null
      });
      State.progress = {};
    }
  } catch(err) { console.error('Veri y√ºklenemedi:', err); }
}

async function saveProgress() {
  if (!State.user) return;
  try {
    await db.collection('users').doc(State.user.uid).update({
      progress: State.progress,
      lastStudyDate: State.todayKey,
    });
  } catch(err) { console.error('Kaydetme hatasƒ±:', err); }
}

function updateStreak() {
  const doc = State.userDoc || {};
  const last = doc.lastStudyDate;
  const today = State.todayKey;
  const yesterday = new Date(); yesterday.setDate(yesterday.getDate()-1);
  const yKey = yesterday.toISOString().slice(0,10);
  let streak = doc.streak || 0;
  if (last === today) { /* same day */ }
  else if (last === yKey) { streak += 1; }
  else if (last && last !== today) { streak = 1; }
  else streak = 1;
  document.getElementById('streak-count').textContent = streak;
  if (last !== today) {
    db.collection('users').doc(State.user.uid).update({ streak, lastStudyDate: today }).catch(()=>{});
  }
}

// ============================================================
// NAVIGATION
// ============================================================
function setupNavigation() {
  document.body.addEventListener('click', e => {
    const target = e.target.closest('[data-page]');
    if (!target) return;
    const page = target.dataset.page;
    navigateTo(page);
  });
}

function navigateTo(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  const el = document.getElementById(`page-${page}`);
  if (el) el.classList.add('active');

  document.querySelectorAll('.nav-link, .bottom-nav-item').forEach(l => {
    l.classList.toggle('active', l.dataset.page === page);
  });

  if (page === 'study') initStudy(false);
  if (page === 'quiz') startQuiz();
  if (page === 'review') initStudy(true);
  if (page === 'words') renderWordList();
  if (page === 'dashboard') updateDashboard();
}

// ============================================================
// DASHBOARD
// ============================================================
function updateDashboard() {
  const learned = Object.values(State.progress).filter(p => p.mastery >= 2).length;
  const todayCount = Object.values(State.progress).filter(p => p.lastSeen === State.todayKey).length;
  const lastQuiz = State.userDoc?.lastQuizScore;

  document.getElementById('stat-learned').textContent = learned;
  document.getElementById('stat-today').textContent = todayCount;
  document.getElementById('stat-quiz').textContent = lastQuiz != null ? `${lastQuiz}%` : '‚Äî';
  document.getElementById('progress-num').textContent = Math.min(todayCount, 50);
  const pct = Math.min((todayCount/50)*100, 100);
  document.getElementById('daily-progress-fill').style.width = pct + '%';
}

// ============================================================
// STUDY ‚Äî FLASHCARD MODE
// ============================================================
function initStudy(reviewMode = false) {
  const el = document.getElementById('study-complete');
  el?.classList.add('hidden');
  document.getElementById('flip-scene').style.display = '';
  document.getElementById('card-actions-initial').classList.remove('hidden');
  document.getElementById('card-actions-rated').classList.add('hidden');
  document.getElementById('study-session-badge').className = 'session-badge ' + (reviewMode ? 'review-badge' : 'new-badge');
  document.getElementById('study-session-badge').textContent = reviewMode ? 'üîÅ Tekrar' : 'üåü Yeni Kelimeler';

  if (reviewMode) {
    // Words with mastery 1 that haven't been seen today
    State.studyQueue = State.words.filter(w => {
      const p = State.progress[w.id];
      return p && p.mastery === 1 && p.lastSeen !== State.todayKey;
    }).slice(0, 30);
    if (State.studyQueue.length === 0) {
      State.studyQueue = State.words.filter(w => {
        const p = State.progress[w.id];
        return p && p.mastery >= 1;
      }).slice(0, 20);
    }
  } else {
    // New words: not yet seen OR not mastered
    const unseenOrNew = State.words.filter(w => !State.progress[w.id] || State.progress[w.id].mastery === 0);
    State.studyQueue = unseenOrNew.slice(0, 50);
  }

  if (State.studyQueue.length === 0) {
    toast('Harika! T√ºm kelimeleri √∂ƒürendiniz üéâ', 'success');
    State.studyQueue = State.words.slice(0, 10); // fallback
  }

  State.studyIndex = 0;
  State.cardFlipped = false;
  showCard();
}

function showCard() {
  const card = State.studyQueue[State.studyIndex];
  if (!card) { endStudy(); return; }

  const flipEl = document.getElementById('flip-card');
  flipEl.classList.remove('flipped');
  State.cardFlipped = false;

  document.getElementById('card-actions-rated').classList.add('hidden');
  document.getElementById('card-actions-initial').classList.remove('hidden');

  document.getElementById('card-en').textContent = card.en;
  document.getElementById('card-level').textContent = '‚≠ê'.repeat(card.level);
  document.getElementById('card-tr').textContent = card.tr;
  document.getElementById('card-example').textContent = `"${card.example}"`;

  const tagsEl = document.getElementById('card-tags');
  tagsEl.innerHTML = '';
  card.synonyms?.slice(0,2).forEach(s => {
    const t = document.createElement('span');
    t.className = 'tag tag-syn'; t.textContent = '‚âà ' + s;
    tagsEl.appendChild(t);
  });
  card.antonyms?.slice(0,2).forEach(a => {
    const t = document.createElement('span');
    t.className = 'tag tag-ant'; t.textContent = '‚â† ' + a;
    tagsEl.appendChild(t);
  });

  const total = State.studyQueue.length;
  const cur = State.studyIndex + 1;
  document.getElementById('study-counter').textContent = `${cur}/${total}`;
  document.getElementById('study-progress-fill').style.width = `${(cur/total)*100}%`;
}

function flipCard() {
  if (State.studyComplete) return;
  const flipEl = document.getElementById('flip-card');
  State.cardFlipped = !State.cardFlipped;
  flipEl.classList.toggle('flipped', State.cardFlipped);
  if (State.cardFlipped) {
    document.getElementById('card-actions-initial').classList.add('hidden');
    document.getElementById('card-actions-rated').classList.remove('hidden');
  }
}

function skipCard() {
  State.studyIndex++;
  if (State.studyIndex >= State.studyQueue.length) endStudy();
  else showCard();
}

function rateCard(rating) {
  const card = State.studyQueue[State.studyIndex];
  const prev = State.progress[card.id] || { mastery: 0, seenCount: 0 };
  let mastery = prev.mastery;

  if (rating === 'easy') mastery = Math.min(2, mastery + 1);
  else if (rating === 'medium') mastery = Math.max(0, Math.min(1, mastery));
  else mastery = Math.max(0, mastery - 1);

  State.progress[card.id] = {
    mastery,
    lastSeen: State.todayKey,
    seenCount: (prev.seenCount || 0) + 1,
  };

  State.studyIndex++;
  if (State.studyIndex >= State.studyQueue.length) {
    saveProgress();
    endStudy();
  } else {
    showCard();
  }
}

function endStudy() {
  saveProgress();
  document.getElementById('flip-scene').style.display = 'none';
  document.getElementById('card-actions-initial').classList.add('hidden');
  document.getElementById('card-actions-rated').classList.add('hidden');
  document.getElementById('study-complete').classList.remove('hidden');
  const mastered = Object.values(State.progress).filter(p => p.mastery >= 2).length;
  document.getElementById('study-score-circle').textContent = `${mastered}`;
}

// ============================================================
// QUIZ MODE
// ============================================================
function startQuiz() {
  document.getElementById('quiz-card').style.display = '';
  document.getElementById('quiz-complete').classList.add('hidden');

  // Use learned words for quiz
  let pool = State.words.filter(w => State.progress[w.id]);
  if (pool.length < 4) pool = State.words.slice(0, Math.max(10, State.words.length));

  // Shuffle
  pool = pool.sort(() => Math.random() - 0.5);
  State.quizQueue = pool.slice(0, Math.min(20, pool.length));
  State.quizIndex = 0;
  State.quizScore = 0;
  showQuizQuestion();
}

function showQuizQuestion() {
  const card = State.quizQueue[State.quizIndex];
  if (!card) { endQuiz(); return; }

  document.getElementById('quiz-word').textContent = card.en;
  const cur = State.quizIndex + 1, total = State.quizQueue.length;
  document.getElementById('quiz-counter').textContent = `${cur}/${total}`;
  document.getElementById('quiz-progress-fill').style.width = `${(cur/total)*100}%`;

  // Generate distractors
  const others = State.words.filter(w => w.id !== card.id);
  const distractors = others.sort(() => Math.random()-0.5).slice(0,3);
  const options = [card, ...distractors].sort(() => Math.random()-0.5);

  const container = document.getElementById('quiz-options');
  container.innerHTML = '';
  options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'quiz-option';
    btn.textContent = opt.tr;
    btn.addEventListener('click', () => answerQuiz(opt.id === card.id, btn, container));
    container.appendChild(btn);
  });
}

function answerQuiz(correct, btn, container) {
  container.querySelectorAll('.quiz-option').forEach(b => b.disabled = true);
  if (correct) {
    btn.classList.add('correct');
    State.quizScore++;
  } else {
    btn.classList.add('wrong');
    // show correct
    container.querySelectorAll('.quiz-option').forEach(b => {
      const card = State.quizQueue[State.quizIndex];
      if (b.textContent === card.tr) b.classList.add('correct');
    });
  }
  setTimeout(() => {
    State.quizIndex++;
    if (State.quizIndex >= State.quizQueue.length) endQuiz();
    else showQuizQuestion();
  }, 900);
}

function endQuiz() {
  const total = State.quizQueue.length;
  const pct = Math.round((State.quizScore/total)*100);
  document.getElementById('quiz-card').style.display = 'none';
  document.getElementById('quiz-complete').classList.remove('hidden');
  document.getElementById('quiz-score-circle').textContent = pct + '%';
  document.getElementById('quiz-result-text').textContent =
    `${total} sorudan ${State.quizScore} doƒüru. ${pct >= 80 ? 'üî• M√ºkemmel!' : pct >= 60 ? 'üëç ƒ∞yi gidiyor!' : 'üí™ Daha √ßok √ßalƒ±≈ü!'}`;

  // Save to Firestore
  if (State.user) {
    db.collection('users').doc(State.user.uid).update({ lastQuizScore: pct }).catch(()=>{});
    if (State.userDoc) State.userDoc.lastQuizScore = pct;
  }
}

// ============================================================
// WORD LIST
// ============================================================
let wordFilter = 'all';
let wordSearch = '';

function setupSearch() {
  document.getElementById('search-input').addEventListener('input', (e) => {
    wordSearch = e.target.value.toLowerCase();
    renderWordList();
  });
}

function setupFilters() {
  document.querySelectorAll('.filter-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      wordFilter = chip.dataset.filter;
      renderWordList();
    });
  });
}

function renderWordList() {
  const grid = document.getElementById('words-grid');
  let words = State.words;

  // Filter by mastery
  if (wordFilter !== 'all') {
    const masteryMap = { new: 0, learning: 1, mastered: 2 };
    const target = masteryMap[wordFilter];
    words = words.filter(w => {
      const m = (State.progress[w.id]?.mastery ?? 0);
      return m === target;
    });
  }

  // Search
  if (wordSearch) {
    words = words.filter(w => w.en.includes(wordSearch) || w.tr.toLowerCase().includes(wordSearch));
  }

  if (words.length === 0) {
    grid.innerHTML = `<div class="empty-state"><div class="empty-icon">üîç</div><p>Kelime bulunamadƒ±.</p></div>`;
    return;
  }

  grid.innerHTML = '';
  words.forEach(w => {
    const mastery = State.progress[w.id]?.mastery ?? 0;
    const masteryLabels = ['Yeni', '√ñƒüreniliyor', '√ñƒürenildi'];
    const masteryColors = ['mastery-0', 'mastery-1', 'mastery-2'];
    const row = document.createElement('div');
    row.className = 'word-row';
    row.innerHTML = `
      <div class="word-en">${w.en}</div>
      <div class="word-tr">${w.tr}</div>
      <div class="word-example">"${w.example}"</div>
      <span class="mastery-badge ${masteryColors[mastery]}">${masteryLabels[mastery]}</span>
    `;
    grid.appendChild(row);
  });
}

// ============================================================
// TOAST
// ============================================================
function toast(msg, type = 'info') {
  const el = document.createElement('div');
  el.className = `toast toast-${type}`;
  el.textContent = msg;
  document.getElementById('toast-container').appendChild(el);
  setTimeout(() => el.remove(), 3000);
}
</script>
</body>
</html>
